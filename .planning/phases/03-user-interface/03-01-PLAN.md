---
phase: 03-user-interface
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - src/index.css
  - src/components/QuestionInput.tsx
  - src/components/QuestionInput.css
  - src/components/LoadingDots.tsx
  - src/components/LoadingDots.css
  - src/components/LyricDisplay.tsx
  - src/components/LyricDisplay.css
  - src/components/CopyButton.tsx
  - src/components/CopyButton.css
  - src/components/StarterQuestions.tsx
  - src/components/StarterQuestions.css
autonomous: true

must_haves:
  truths:
    - "Google Fonts (Lora serif + Inter sans-serif) load with font-display: swap"
    - "CSS custom properties define the full soft neutral color palette"
    - "All 5 UI components exist as typed React components with co-located CSS"
    - "QuestionInput renders a text input with placeholder 'Ask Taylor...' and a submit icon button"
    - "LoadingDots renders three pulsing dots with staggered animation"
    - "LyricDisplay renders lyric text in serif font with typewriter CSS animation"
    - "CopyButton copies text to clipboard and shows confirmation feedback"
    - "StarterQuestions renders 3 vulnerable/real starter question chips"
  artifacts:
    - path: "index.html"
      provides: "Font preconnect and Google Fonts stylesheet link"
      contains: "fonts.googleapis.com"
    - path: "src/index.css"
      provides: "Design system with CSS custom properties, base styles, animation keyframes"
      contains: "--color-bg"
    - path: "src/components/QuestionInput.tsx"
      provides: "Controlled text input with submit handler"
      exports: ["QuestionInput"]
    - path: "src/components/LoadingDots.tsx"
      provides: "Three-dots pulsing loading indicator"
      exports: ["LoadingDots"]
    - path: "src/components/LyricDisplay.tsx"
      provides: "Lyric text display with typewriter animation"
      exports: ["LyricDisplay"]
    - path: "src/components/CopyButton.tsx"
      provides: "Clipboard copy with confirmation feedback"
      exports: ["CopyButton"]
    - path: "src/components/StarterQuestions.tsx"
      provides: "Three starter question chips"
      exports: ["StarterQuestions"]
  key_links:
    - from: "index.html"
      to: "Google Fonts CDN"
      via: "link rel=stylesheet"
      pattern: "fonts\\.googleapis\\.com.*Lora.*Inter"
    - from: "src/index.css"
      to: "all components"
      via: "CSS custom properties"
      pattern: "--color-bg.*--font-serif.*--font-sans"
---

<objective>
Build the design system foundation and all individual UI components for the lyric matching interface.

Purpose: Establish the visual identity (soft neutral palette, Lora + Inter fonts, warm/calm aesthetic) and create all 5 self-contained React components that Plan 02 will wire together in App.tsx.

Output: 12 files — updated index.html and index.css, plus 5 component/CSS pairs in src/components/.
</objective>

<execution_context>
@/Users/august/.claude/get-shit-done/workflows/execute-plan.md
@/Users/august/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-user-interface/03-RESEARCH.md
@.planning/phases/03-user-interface/03-CONTEXT.md

@src/lib/api-client.ts
@src/types/api.ts
@src/index.css
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Design system foundation — fonts, CSS variables, base styles, animation keyframes</name>
  <files>index.html, src/index.css</files>
  <action>
**index.html changes:**
- Add `<link rel="preconnect" href="https://fonts.googleapis.com">` in head
- Add `<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>` in head
- Add Google Fonts stylesheet link loading Lora (400, 500 weights) and Inter (400, 500 weights) with `display=swap`
- Update `<title>` from "taylor" to "What Would Taylor Say?"

**src/index.css complete rewrite** (replace all existing Vite scaffold styles):

CSS custom properties in `:root`:
- `--color-bg: #FDFCFA` (warm white background)
- `--color-bg-secondary: #F8F6F3` (subtle beige for input background)
- `--color-text: #2D2A27` (dark gray, not pure black)
- `--color-text-muted: #8B8682` (light gray for secondary text, placeholders)
- `--color-accent: #C9ADA7` (soft rose for subtle accents)
- `--color-border: #E8E4E0` (subtle warm border)
- `--font-sans: 'Inter', system-ui, -apple-system, sans-serif`
- `--font-serif: 'Lora', 'Georgia', serif`
- `--transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1)`
- `--transition-normal: 0.4s cubic-bezier(0.4, 0, 0.2, 1)`
- `--transition-slow: 0.6s cubic-bezier(0.4, 0, 0.2, 1)`

Base styles:
- `*` box-sizing: border-box
- `body`: margin 0, background var(--color-bg), color var(--color-text), font-family var(--font-sans), line-height 1.5, min-height 100vh, -webkit-font-smoothing antialiased
- `#root`: min-height 100vh, display flex, flex-direction column
- Remove ALL Vite scaffold styles (dark mode, link colors, button defaults)
- `input, button, textarea`: font-family inherit, font-size inherit
- `button`: cursor pointer, border none, background none, padding 0 (reset — components style their own buttons)

Animation keyframes (global, used by components):

```css
@keyframes pulse-dot {
  0%, 80%, 100% { opacity: 0.3; transform: scale(1); }
  40% { opacity: 1; transform: scale(1.2); }
}

@keyframes typewriter-reveal {
  from { max-width: 0; }
  to { max-width: 100%; }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
```

Reduced motion override:
```css
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

Do NOT include `color-scheme: light dark` or any dark mode styles — light mode only per user decision.
  </action>
  <verify>
Run `npm run build` — zero TypeScript/CSS errors. Visually confirm: open dev server, page has warm white background (#FDFCFA), Inter font loaded (check DevTools Network tab for Google Fonts request).
  </verify>
  <done>
index.html loads Google Fonts with preconnect. index.css defines complete design system with CSS custom properties, base reset styles, and animation keyframes. No Vite scaffold styles remain. Page renders with warm white background and Inter font.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create QuestionInput, LoadingDots, and StarterQuestions components</name>
  <files>src/components/QuestionInput.tsx, src/components/QuestionInput.css, src/components/LoadingDots.tsx, src/components/LoadingDots.css, src/components/StarterQuestions.tsx, src/components/StarterQuestions.css</files>
  <action>
First, create `src/components/` directory.

**QuestionInput.tsx** — Controlled text input with submit capability:

```typescript
interface QuestionInputProps {
  value: string;
  onChange: (value: string) => void;
  onSubmit: () => void;
  disabled?: boolean;
  compact?: boolean; // true = smaller version after submission
}
```

- Render a `<form>` with `onSubmit` that calls `e.preventDefault()` then `props.onSubmit()`
- Inside form: `<div className="question-input-wrapper">` containing:
  - `<input type="text">` with value, onChange, placeholder "Ask Taylor...", disabled prop, minLength 1, maxLength 200, autoComplete "off"
  - Font size 16px minimum (prevents iOS zoom)
  - `<button type="submit">` with a simple send arrow SVG icon (inline SVG: a rightward arrow or paper-plane shape, 20x20, stroke currentColor). Button disabled when `value.trim().length === 0 || disabled`
  - Button is visually subtle — uses `var(--color-text-muted)` and transitions to `var(--color-text)` on hover
- Apply `compact` class to wrapper when `compact` prop is true (used for post-submission shrunk state)
- Export as named export: `export function QuestionInput`

**QuestionInput.css:**
- `.question-input-wrapper`: display flex, align-items center, background var(--color-bg-secondary), border-radius 24px, padding 4px 4px 4px 20px, border 1px solid var(--color-border), transition border-color var(--transition-fast), max-width 560px, width 100%
- `.question-input-wrapper:focus-within`: border-color var(--color-accent)
- `.question-input-wrapper input`: flex 1, border none, background none, outline none, color var(--color-text), font-size 16px, line-height 1.5, padding 12px 0, font-family var(--font-sans)
- `.question-input-wrapper input::placeholder`: color var(--color-text-muted)
- `.question-input-wrapper button[type="submit"]`: width 40px, height 40px, border-radius 50%, display flex, align-items center, justify-content center, color var(--color-text-muted), transition all var(--transition-fast), flex-shrink 0
- `.question-input-wrapper button[type="submit"]:hover:not(:disabled)`: color var(--color-text), background var(--color-bg)
- `.question-input-wrapper button[type="submit"]:disabled`: opacity 0.3, cursor default
- `.question-input-wrapper.compact`: max-width 480px (slightly narrower when in top position)

**LoadingDots.tsx** — Three pulsing dots:

No props needed (or optional `className`).

- Render `<div className="loading-dots" role="status" aria-label="Finding your lyric...">` containing 3 `<span>` elements
- Each span is a small circle dot
- Export as named export: `export function LoadingDots`

**LoadingDots.css:**
- `.loading-dots`: display flex, gap 6px, justify-content center, align-items center, padding 24px 0
- `.loading-dots span`: width 8px, height 8px, border-radius 50%, background-color var(--color-accent), animation pulse-dot 1.4s ease-in-out infinite
- `.loading-dots span:nth-child(2)`: animation-delay 0.2s
- `.loading-dots span:nth-child(3)`: animation-delay 0.4s

**StarterQuestions.tsx** — Three vulnerable/real starter question chips:

```typescript
interface StarterQuestionsProps {
  onSelect: (question: string) => void;
  visible?: boolean; // controls fade-in visibility
}
```

The 3 starter questions (Claude-authored per user decision — tone: vulnerable & real, questions people ask at midnight):
1. "Am I wasting my time on someone who doesn't care?"
2. "Will this feeling ever pass?"
3. "Am I strong enough to start over?"

- Render `<div className="starter-questions">` with 3 `<button type="button">` elements (type="button" is CRITICAL — prevents form submission)
- Each button has `onClick={() => onSelect(questionText)}`
- Apply `visible` class when `visible` prop is true (for fade-in animation)
- Each chip gets a staggered `animation-delay` via `style={{ animationDelay: '${index * 0.1}s' }}`
- Export as named export: `export function StarterQuestions`

**StarterQuestions.css:**
- `.starter-questions`: display flex, flex-wrap wrap, gap 8px, justify-content center, padding 16px 0, opacity 0
- `.starter-questions.visible`: animation fade-in-up 0.5s ease forwards
- `.starter-questions button`: font-family var(--font-sans), font-size 14px, color var(--color-text-muted), background var(--color-bg-secondary), border 1px solid var(--color-border), border-radius 20px, padding 10px 18px, cursor pointer, transition all var(--transition-fast), min-height 44px, white-space nowrap, opacity 0, animation fade-in-up 0.4s ease forwards
- `.starter-questions button:hover`: color var(--color-text), border-color var(--color-accent), background var(--color-bg)
- `.starter-questions button:active`: transform scale(0.97)
- On mobile (max-width 600px): starter questions stack vertically — flex-direction column, width 100%, button white-space normal, text-align center
  </action>
  <verify>
Run `npm run build` — zero errors. Check that all 3 component files import correctly. Run `npm run lint` — no linting errors. Verify: `ls src/components/` shows 6 files (3 .tsx + 3 .css).
  </verify>
  <done>
QuestionInput renders a pill-shaped text input with send icon button. LoadingDots renders three pulsing dots with staggered animation. StarterQuestions renders 3 vulnerable/real question chips with `type="button"` that call onSelect without submitting a form. All components use CSS custom properties from index.css. All touch targets are 44px+ minimum.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create LyricDisplay and CopyButton components</name>
  <files>src/components/LyricDisplay.tsx, src/components/LyricDisplay.css, src/components/CopyButton.tsx, src/components/CopyButton.css</files>
  <action>
**LyricDisplay.tsx** — Lyric text with typewriter animation:

```typescript
interface LyricDisplayProps {
  lyric: string;
  onAnimationComplete?: () => void;
}
```

- Use `useRef` to reference the lyric text element
- Use `useEffect` to dynamically set `--char-count` CSS variable on the element based on `lyric.length`
- Calculate animation duration: `lyric.length * 0.04` seconds (40ms per character — feels like someone thoughtfully typing, not a terminal). Clamp between 1s and 4s to keep reasonable bounds.
- Set `--type-duration` CSS variable alongside `--char-count`
- The typewriter effect approach: Use a `<span>` with `overflow: hidden`, `white-space: nowrap` (for single-line lyrics) or `display: inline-block` approach. Since lyrics are 1-2 lines and may wrap, use a character-by-character JS approach instead of pure CSS width animation:
  - Use `useState` to track `displayedChars` count, starting at 0
  - Use `useEffect` with `setInterval` that increments `displayedChars` by 1 every 40ms
  - When `displayedChars === lyric.length`, clear interval and call `onAnimationComplete` if provided
  - Render: `<p className="lyric-text">{lyric.slice(0, displayedChars)}<span className="lyric-cursor">|</span></p>`
  - The cursor `|` blinks during typing, then fades out after completion
  - Reset `displayedChars` to 0 when `lyric` prop changes (new lyric)
- Respect `prefers-reduced-motion`: Use `window.matchMedia('(prefers-reduced-motion: reduce)')` — if true, show full lyric immediately (set displayedChars to lyric.length)
- Wrap in `<div className="lyric-display">` with `role="status"` and `aria-live="polite"`
- Export as named export: `export function LyricDisplay`

**LyricDisplay.css:**
- `.lyric-display`: text-align center, padding 8px 24px, max-width 560px, margin 0 auto, animation fade-in 0.3s ease
- `.lyric-text`: font-family var(--font-serif), font-size clamp(1.125rem, 2.5vw, 1.375rem), line-height 1.7, color var(--color-text), letter-spacing 0.01em, margin 0
- `.lyric-cursor`: color var(--color-accent), animation blink-cursor 0.6s steps(2) infinite, font-weight 100, margin-left 1px
- `.lyric-cursor.done`: animation blink-cursor 0.6s steps(2) 3 forwards (blinks 3 times then stops)

Add cursor blink keyframe:
```css
@keyframes blink-cursor {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}
```

**CopyButton.tsx** — Clipboard copy with feedback:

```typescript
interface CopyButtonProps {
  text: string;
}
```

- Use `useState` for `copied` (boolean, default false)
- `handleCopy` async function:
  - `await navigator.clipboard.writeText(text)`
  - Set `copied` to true
  - `setTimeout(() => setCopied(false), 2000)` — reset after 2 seconds
  - Wrap in try/catch — on failure, log error (don't show error to user, the copy just won't confirm)
- Render a `<button type="button" className="copy-button">` containing:
  - When not copied: small clipboard SVG icon (16x16, inline SVG) + text "Copy"
  - When copied: small checkmark SVG icon (16x16, inline SVG) + text "Copied"
  - Transition between states with fade
- `aria-label` that says "Copy lyric to clipboard" or "Lyric copied"
- Export as named export: `export function CopyButton`

**CopyButton.css:**
- `.copy-button`: display inline-flex, align-items center, gap 6px, font-family var(--font-sans), font-size 13px, color var(--color-text-muted), padding 8px 14px, border-radius 16px, transition all var(--transition-fast), min-height 36px, margin-top 12px
- `.copy-button:hover`: color var(--color-text), background var(--color-bg-secondary)
- `.copy-button svg`: width 16px, height 16px, flex-shrink 0
- `.copy-button.copied`: color var(--color-accent)
  </action>
  <verify>
Run `npm run build` — zero errors. Run `npm run lint` — no linting errors. Verify: `ls src/components/` shows 10 files (5 .tsx + 5 .css).
  </verify>
  <done>
LyricDisplay renders lyric text in Lora serif with character-by-character typewriter animation (40ms/char, clamped 1-4s), blinking cursor that fades after completion, and prefers-reduced-motion support. CopyButton uses navigator.clipboard.writeText with 2-second "Copied" confirmation and checkmark icon swap. Both components use CSS custom properties and are properly typed.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` passes with zero errors
2. `npm run lint` passes with zero errors
3. `ls src/components/` shows 10 files: QuestionInput.tsx/.css, LoadingDots.tsx/.css, LyricDisplay.tsx/.css, CopyButton.tsx/.css, StarterQuestions.tsx/.css
4. index.html includes Google Fonts link for Lora + Inter
5. index.css has no Vite scaffold styles remaining, uses warm white (#FDFCFA) background
6. Dev server shows warm white page with Inter font loaded (visible in DevTools Network tab)
</verification>

<success_criteria>
All 5 components exist as typed, self-contained React components with co-located CSS. Design system CSS variables defined. Google Fonts loading. No build or lint errors. Components are ready to be wired together in App.tsx by Plan 02.
</success_criteria>

<output>
After completion, create `.planning/phases/03-user-interface/03-01-SUMMARY.md`
</output>
